# ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘ê¸°

í•œêµ­ ì£¼ì‹ ì‹œì¥ì˜ ì£¼ê°€ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³  ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒŒì´ì¬ ê¸°ë°˜ ë„êµ¬ì…ë‹ˆë‹¤.

> [!CAUTION]
> ### ë²•ì Â·ì´ìš© ì£¼ì˜ì‚¬í•­ (ì¤‘ìš”)
> *   **ëª©ì **: ë³¸ í”„ë¡œì íŠ¸ëŠ” **ê°œì¸ í•™ìŠµ ë° ë¹„ì˜ë¦¬ ëª©ì **ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ì‹œê¸°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.
> *   **ì„¤ê³„**: Daum ì£¼ê°€ì½”ë“œ ì¡°íšŒ ë° Naver ì£¼ê°€ ë°ì´í„°(OHLCV) ìˆ˜ì§‘ì„ ìœ„í•œ ê°œì¸ ê°œë°œ ë„êµ¬ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
> *   **ì±…ì„**: ìƒì—…ì  ê±°ë˜, ì•Œê³ ë¦¬ì¦˜ íŠ¸ë ˆì´ë”©, ì˜ë¦¬ ëª©ì  ì´ìš© ë“± ê¸ˆìœµíˆ¬ìì—…ë²• ë° ì„œë¹„ìŠ¤ ì´ìš©ì•½ê´€ ìœ„ë°˜ì‹œ **ëª¨ë“  ë²•ì  ì±…ì„ì€ ì‚¬ìš©ì ë³¸ì¸**ì—ê²Œ ìˆìŠµë‹ˆë‹¤.
> *   **ê¶Œì¥**: KRX ì •ì‹ ë°ì´í„° ì„œë¹„ìŠ¤ ì´ìš©ì„ ê°•ë ¥íˆ ê¶Œì¥í•©ë‹ˆë‹¤.
> *   **ì„±ê²©**: ë³¸ í”„ë¡œì íŠ¸ëŠ” ê³µì‹ APIê°€ ì•„ë‹Œ **ê°œì¸ í¬ë¡¤ë§ ìŠ¤í¬ë¦½íŠ¸**ì…ë‹ˆë‹¤.

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### 1. KR Symbol ê´€ë¦¬
*   KOSPI ë° KOSDAQ ì‹œì¥ì˜ ì „ ì¢…ëª© ì‹¬ë³¼ ì •ë³´ ìˆ˜ì§‘
*   ë°ì´í„° ìˆ˜ì§‘ ëŒ€ìƒ ë¦¬ìŠ¤íŠ¸ ìë™ ì—…ë°ì´íŠ¸

### 2. ì¼ë³„ ì‹œì„¸ ìˆ˜ì§‘ (Day Data)
*   ë„¤ì´ë²„ ê¸ˆìœµì„ í†µí•œ í•œêµ­ ì£¼ì‹ì˜ ì¼ìë³„ OHLCV ë°ì´í„° ìˆ˜ì§‘
*   ì§€ì •ëœ ë‚ ì§œì˜ ì¢…ê°€, ì‹œê°€, ê³ ê°€, ì €ê°€, ê±°ë˜ëŸ‰ ê¸°ë¡

### 3. ë¶„ ë‹¨ìœ„ ì‹œì„¸ ìˆ˜ì§‘ (Minute Data)
*   ì¼ì¤‘ ë¶„ ë‹¨ìœ„ ì‹œì„¸ ìˆ˜ì§‘ ë° ë°ì´í„° ì¤‘ë³µ ì œê±° ë¡œì§ í¬í•¨
*   ê³ ë¹ˆë„ ë°ì´í„° ë¶„ì„ì„ ìœ„í•œ ê¸°ë°˜ ë°ì´í„° ì œê³µ

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```text
krx-price/
â”œâ”€â”€ src/                    # ğŸ“¦ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ symbol.py          # ì¢…ëª© ì‹¬ë³¼ ìˆ˜ì§‘ ë° ê´€ë¦¬
â”‚   â”œâ”€â”€ day.py             # ì¼ë³„ OHLCV ë°ì´í„° ìˆ˜ì§‘
â”‚   â””â”€â”€ minute.py          # ë¶„ ë‹¨ìœ„ ë°ì´í„° ìˆ˜ì§‘
â”œâ”€â”€ tests/                  # ğŸ§ª í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸
â”‚   â”œâ”€â”€ test_symbol.py     # ì‹¬ë³¼ ìˆ˜ì§‘ ë¡œì§ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_day.py        # ì¼ë³„ ë°ì´í„° ìˆ˜ì§‘ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_minute.py     # ë¶„ ë‹¨ìœ„ ë°ì´í„° ìˆ˜ì§‘ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ test_integration.py # ì‹¤ì œ API í˜¸ì¶œ í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ README.md          # ìƒì„¸ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
â”œâ”€â”€ scripts/                # ğŸ› ï¸ ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ setup-dev.sh/bat   # ê°œë°œ í™˜ê²½ ìë™ ì„¤ì •
â”‚   â””â”€â”€ deploy.sh          # Linux ë°°í¬ ë° systemd ìŠ¤ì¼€ì¤„ëŸ¬ ì„¤ì •
â”œâ”€â”€ requirements.txt        # ğŸ“ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ëª©ë¡
â”œâ”€â”€ Dockerfile             # ğŸ³ Docker ì´ë¯¸ì§€ ë¹Œë“œ ì„¤ì •
â””â”€â”€ docker-compose.yml     # ğŸš¢ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ë° ë³¼ë¥¨ ì„¤ì •
```

---

## âš™ï¸ ê°œë°œ í™˜ê²½ ì„¤ì •

### 1. ìë™ ì„¤ì • (ê¶Œì¥)

`setup-dev` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ìƒí™˜ê²½ ìƒì„±ë¶€í„° ì˜ì¡´ì„± ì„¤ì¹˜ê¹Œì§€ í•œ ë²ˆì— ì™„ë£Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| OS | ëª…ë ¹ì–´ |
| :--- | :--- |
| **Windows** | `scripts\setup-dev.bat` |
| **Linux/macOS** | `chmod +x scripts/*.sh && ./scripts/setup-dev.sh` |

> [!NOTE]
> ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í›„ ê°€ìƒí™˜ê²½ì„ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤:
> *   Windows: `.venv\Scripts\activate.bat`
> *   Linux/macOS: `source .venv/bin/activate`

### 2. ìˆ˜ë™ ì„¤ì •
```bash
python -m venv .venv
# (ê°€ìƒí™˜ê²½ í™œì„±í™” í›„)
pip install -r requirements.txt
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰

ë³¸ í”„ë¡œì íŠ¸ëŠ” ì´ **55ê°œì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.

*   **ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰**: `python -m unittest discover tests -v`
*   **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Mock)**: `python -m unittest tests.test_symbol tests.test_day tests.test_minute -v`
*   **í†µí•© í…ŒìŠ¤íŠ¸ (Real API)**: `python -m unittest tests.test_integration -v`

---

## ğŸ³ Docker & ë°°í¬

ì´ í”„ë¡œì íŠ¸ëŠ” Docker ì»¨í…Œì´ë„ˆì™€ í˜¸ìŠ¤íŠ¸ì˜ **systemd timer**ë¥¼ ì—°ë™í•˜ì—¬ ìë™ ìˆ˜ì§‘ í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

### 1. ë°°í¬ ë° ì‹œìŠ¤í…œ ìë™í™” ì„¤ì • (Linux)
ì œê³µëœ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ì†ŒìŠ¤ ì½”ë“œ ë³µì‚¬, Docker ë¹Œë“œ, ì„œë¹„ìŠ¤/íƒ€ì´ë¨¸ ë“±ë¡ì´ í•œ ë²ˆì— ì§„í–‰ë©ë‹ˆë‹¤.
```bash
sudo ./scripts/deploy.sh
```
*   **ìŠ¤ì¼€ì¤„**: ë§¤ í‰ì¼(ì›”-ê¸ˆ) 17:00ì— ìë™ ì‹¤í–‰
*   **ë™ì‘**: ì»¨í…Œì´ë„ˆ ì‹¤í–‰ í›„ ìˆ˜ì§‘ íƒœìŠ¤í¬ê°€ ì™„ë£Œë˜ë©´ ì¦‰ì‹œ ì¢…ë£Œ (`--rm`)

### 2. ìˆ˜ë™ ì‹¤í–‰
```bash
docker compose run --rm app
```

---

## ğŸ’¾ ë°ì´í„° ê´€ë¦¬

*   **ì €ì¥ ê²½ë¡œ**: í˜¸ìŠ¤íŠ¸ì˜ `/srv/krx-price` ê²½ë¡œì— ë°ì´í„°ê°€ ì €ì¥ë©ë‹ˆë‹¤.
*   **ë””ë ‰í† ë¦¬ êµ¬ì¡°**:
    *   `/srv/krx-price/day`: ì¼ë³„ ë°ì´í„°
    *   `/srv/krx-price/minute`: ë¶„ ë‹¨ìœ„ ë°ì´í„°
*   **ë³¼ë¥¨ ì„¤ì •**: `docker-compose.yml`ì„ í†µí•´ í˜¸ìŠ¤íŠ¸ ê²½ë¡œì™€ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ê²½ë¡œê°€ ë™ê¸°í™”ë©ë‹ˆë‹¤.
